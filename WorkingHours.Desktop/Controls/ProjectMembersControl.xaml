<common:UserControlEx x:Class="WorkingHours.Desktop.Controls.ProjectMembersControl"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                      xmlns:local="clr-namespace:WorkingHours.Desktop.Controls"
                      xmlns:ioc="clr-namespace:WorkingHours.Desktop.IoC"
                      xmlns:vm="clr-namespace:WorkingHours.Desktop.Interfaces.ViewModels"
                      xmlns:cntrl="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
                      xmlns:common="clr-namespace:WorkingHours.Desktop.Common"
                      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                      xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Platform"
                      mc:Ignorable="d"
                      d:DesignHeight="300"
                      d:DesignWidth="300">
    <Grid DataContext="{ioc:ViewModel ViewModelType={x:Type vm:IProjectMembersViewModel}}">
        <StackPanel>
            <cntrl:AutoCompleteBox ItemsSource="{Binding Path=SearchResults}"
                                   MinimumPopulateDelay="500"
                                   x:Name="userNameBox"
                                   MinimumPrefixLength="3"
                                   Populating="UserNameBox_OnPopulating"
                                   FilterMode="None"
                                   ValueMemberPath="FullName">
                <cntrl:AutoCompleteBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel HorizontalAlignment="Stretch">
                            <TextBlock Text="{Binding FullName}" />
                            <TextBlock HorizontalAlignment="Right"
                                       Text="{Binding Email}" />
                        </StackPanel>
                    </DataTemplate>
                </cntrl:AutoCompleteBox.ItemTemplate>
            </cntrl:AutoCompleteBox>
            <Button HorizontalAlignment="Right"
                    Command="{Binding AddCommand}"
                    CommandParameter="{Binding ElementName=userNameBox, Path=SelectedItem}">Add!</Button>
        </StackPanel>
    </Grid>
</common:UserControlEx>
